<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="./../assets/css/combined.css">
	<link rel="shortcut icon" href="./../favicon.ico" />
	<script src="http://www.google.com/jsapi" type="text/javascript"></script>
	<script type="text/javascript">
		var path = './../';
	</script>
	<script src="./../assets/js/combined.js"></script>
	<title>编码标准 - 常规 - FuelPHP 文档</title>
</head>
<body>
	<div id="container">
		<header id="header">
			<div class="table">
				<h1>
					<strong>FuelPHP, a PHP 5.3 Framework</strong>
					文档
				</h1>

				<form id="google_search">
					<p>
						<span id="search_clear">&nbsp;</span>
						<input type="submit" name="search_submit" id="search_submit" value="search" />
						<input type="text" value="" id="search_input" name="search_input" />
					</p>
				</form>
			</div>
			<nav>

				<div class="clear"></div>
			</nav>
			<a href="#" id="toc_handle">目录</a>
			<div class="clear"></div>
		</header>

		<div id="cse">
			<div id="cse_point"></div>
			<div id="cse_content"></div>
		</div>

		<div id="main">

			<h2>编码标准</h2>

			<p>每一个为 Fuel 贡献者都必须遵循这些代码格式和文件标准.
				任何贡献代码若不符合这些准则，将不予接受.</p>

			<h3 id="file_formatting">文件格式</h3>

			<h5 id="closing_php_tag">PHP 结束标记</h5>

			<p>只包含PHP代码的文件应该总是忽略PHP结束标记 (?>). 以防止莫名其妙的空格.</p>

			<h5 id="indentation">缩进</h5>

			<p>所有缩进都使用真实制表符缩进, 而不是空格.<br />
				但是在缩进后想对其某些代码那么你就需要使用空格, 而不是制表符.</p>

			<pre class="php"><code>		// 被缩进两个单位制表符
		$var       = 'something';  // 使用制表符缩进以及使用空格对其赋值和注释
		$variable  = 'else';       // 这周边使用空格</code></pre>

			<h5 id="line_endings">行尾</h5>

			<p>行尾应该是 Unix 风格 LF.</p>

			<h5 id="file_naming">文件命名</h5>

			<p>所有文件名都必须是小写字母. 没有例外.</p>

			<h5 id="encoding">编码</h5>

			<p>文件应该保存为 UTF-8 编码，并不需要使用 BOM.</p>

			<h3 id="naming_conventions">命名约定</h3>

			<h5 id="namespaces">命名空间</h5>

			<p>所有的核心类都必须是 Fuel\Core 命名空间下.</p>

			<pre class="php"><code>namespace Fuel\Core;</code></pre>

			<h5 id="classes">类</h5>

			<p>类名称应该是用下划线分隔单词, 每个单词首字母须使用大写字母. 然而在加载期间下划线会被转换为目录分隔. 我们不建议使用陀峰命名，将文件放置子目录将无法工作.</p>

			<pre class="php"><code>namespace Fuel\Core;

class Session
{

}</code></pre>

			<pre class="php"><code>namespace Fuel\Core;

class Session_Cookie extends Session_Driver
{

}</code></pre>

			<p>它们将视为在以下目录中:</p>

			<pre class="php"><code>core/classes/session.php
core/classes/session/cookie.php</code></pre>

			<h5 id="methods_standards">方法</h5>

			<p>和类命名一样, 方法名也使用下划线分隔单词, 不能使用陀峰命名. 方法名也必须使用小写字母. 可见性应该总是这些值 (public, protected, private).<br />
				可以使用下划线开头命名 protected/private 方法以便一目了然 ，对 public 方法也一样容易辨别.</p>

			<pre class="php"><code>class Session
{

	public static function get_flash($name, $data)
	{
		// 一些代码
	}

}</code></pre>

			<pre class="php"><code>class View
{

	// 视图数据全局数组
	protected static $_global_data = array();

	protected static function capture($view_filename, array $view_data)
	{
		// 一些代码
	}

}</code></pre>

			<h5 id="variables">变量</h5>

			<p>变量应当简单明了，只能包含小子字母和下划线. 循环迭代器尽可能短, 优选单字符.</p>

			<pre class="php"><code>$first_name
$buffer
for ($i = 0; $i &lt; $max; $i++)</code></pre>

			<h5 id="constants">常量</h5>

			<p>常量遵循变量一样的规则，但是它所有字母必须大写。</p>

			<pre class="php"><code>MY_CONSTANT
TEMPLATE_PATH
TEXT_DEFAULT</code></pre>

			<h3 id="keywords">关键字</h3>

			<p>例如 <kbd>true</kbd>, <kbd>false</kbd>, <kbd>null</kbd>, <kbd>as</kbd>, 等关键字需要小写, 因为大写字母预留给常量. 基本数据类型 <kbd>array</kbd>, <kbd>integer</kbd>, <kbd>string</kbd> 也是一样.</p>

			<pre class="php"><code>$var = true;
$var = false;
$var = null;
foreach ($array as $key => $value)
public function my_function(array $array)
function my_function($arg = null)</code></pre>

			<h3 id="control_structures">控制结构</h3>

			<p>结构关键字 <kbd>if</kbd>, <kbd>for</kbd>, <kbd>foreach</kbd>, <kbd>while</kbd>, <kbd>switch</kbd> 后应跟一个空格，和参数列表一样。
                            花括号需要另起一行, <kbd>break</kbd> 应该和 case 语句相同缩进.</p>

			<pre class="php"><code>if ($arg === true)
{
	//do something here
}
elseif ($arg === null)
{
	//do something else here
}
else
{
	//catch all do something here
}

foreach ($array as $key => $value)
{
	//loop here
}

for ($i = 0; $i &lt; $max; $i++)
{
	//loop here
}

while ($i &lt; $max)
{
	//loop here
}

do
{
	//loop here
}
while ($i &lt; $max)

switch ($var)
{
	case 'value1':
		//do something here
	break;
	default :
		//do something here
	break;
}</code></pre>

			<h5 id="alternative_if">if 语句替代</h5>

			<p>在某些情况, 一个完整的 <kbd>if</kbd> 语句对于一个简单的条件赋值或者函数调用来说显得有点臃肿. 
                            在这样情况下, 你可以使用较短的布尔运算符进行逻辑运算.
				使用 <kbd>and</kbd> 意味只有当第一个表达式为真时才会执行第二个条件表达式, 使用
				<kbd>or</kbd> 意味着只有当第一个表达式为假时才会执行第二个条件表达式.<br />
				不要当需要 <kbd>if</kbd> 以及 <kbd>else</kbd> 情况下使用她们, 仅仅是单一条件表达式.</p>

			<pre class="php"><code>// 代替 if (isset($var)) { Config::set('var', $var); }
isset($var) and Config::set('var', $var);

// 代替 if ( ! isset($var)) { $var = Config::get('var'); }
isset($var) or $var = Config::get('var');

// 别这么做
Uri::segment(3) and $var = Uri::segment(3);
Uri::segment(3) or $var = 'default';

// 你应该这样:
if (Uri::segment(3))
{
	$var = Uri::segment(3);
}
else
{
	$var = 'default';
}

// 或者这样:
$var = Uri::segment(3) ? Uri::segment(3) : 'default';
// 甚至是这样:
$var = Uri::segment(3) ?: 'default';</code></pre>

			<h3 id="comparison_logical">比较, 逻辑运算符</h3>

			<p>比较函数返回值类型应该是明确的, 例如有些函数返回false
				<kbd>false</kbd>, 当我们比较时应该使用类型敏感 <kbd>===</kbd> or <kbd>!==</kbd> 比较符. 此外, 使用
				<kbd>and</kbd> or <kbd>or</kbd> 首选与 <kbd>&amp;&amp;</kbd> or <kbd>||</kbd> 提供可读性. 在某些情况下, 使用
				<kbd>&amp;&amp;</kbd> or <kbd>||</kbd> 无法避免，也是可以作为所需. <kbd>!</kbd> 需要在两侧空一格.</p>

			<pre class="php"><code>if ($var == false and $other_var != 'some_value')
if ($var === false or my_function() !== false)
if ( ! $var)</code></pre>

			<h5 id="class_interface">类/接口 定义</h5>

			<p>类/接口定义时开始花括号在下一行:</p>

			<pre class="php"><code>class Session
{

}</code></pre>
			<p>当类空的情况下，花括号定义在同一行:</p>

			<pre class="php"><code>class Empty_Class { }</code></pre>

			<h5 id="function_method">函数/方法/闭包 定义</h5>

			<p>函数/方法/闭包中花括号必须始终另起一行，并且结构哦呢中必须使用相同缩进量.</p>

			<pre class="php"><code>class Session
{

	public static function get_flash($name, $data)
	{
		$closure = function($a, $b)
		{
			// 闭包代码
		}
	}

}</code></pre>

			<h5 id="variables">变量</h5>

			<p>初始化变量时，为提高代码可读性，它们应该各自定义一行。对其赋值以及添加适当的注释，.</p>

			<pre class="php"><code>$var        = ''; // do each on its own line
$other_var  = ''; // do each on its own line</code></pre>

			<h5 id="brackets_parenthesis">方括号和圆括号</h5>

			<p>方括号和圆括号体内前后不应该有空格.</p>

			<pre class="php"><code>$array = array(1, 2, 3, 4);
$array['my_index'] = 'something';
for ($i = 0; $i < $max; $i++)</code></pre>

			<h5 id="quotation">字符串引号</h5>

			<p>单引号首选于双引号.</p>

			<h5 id="concatenation">连接</h5>

			<p>字符串连接部分不应该包含空格.</p>

			<pre class="php"><code>//yes
$string = 'my string '.$var.' the rest of my string';

//no
$string = 'my string ' . $var . ' the rest of my string';</code></pre>

			<h5 id="operators">操作符</h5>

			<pre class="php"><code>$var = 'something';
if ($var == 'something') //逻辑运算符前后空格
$var = $some_var + $other_var; //算符运算符前后空格
$var++; // 自增运算符不出现空格
++$var; //自增运算符后不出现空格</code></pre>

		</div>

		<footer>
			<p>
				&copy; FuelPHP Development Team 2010-2012 - <a href="http://fuelphp.com">FuelPHP</a> is released under the MIT license.
			</p>
		</footer>
	</div>
</body>
</html>
